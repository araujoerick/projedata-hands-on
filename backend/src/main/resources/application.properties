# Datasource (shared)
quarkus.datasource.db-kind=postgresql

# Flyway — rodar migrations automaticamente ao iniciar
quarkus.flyway.migrate-at-start=true

# Hibernate — deixar o Flyway gerenciar o schema
quarkus.hibernate-orm.schema-management.strategy=none

# CORS — liberar o frontend em dev
quarkus.http.cors.enabled=true
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS
quarkus.http.cors.headers=Content-Type,Authorization

# Swagger UI sempre disponível
quarkus.swagger-ui.always-include=true

# --- Perfil de desenvolvimento (Docker Compose local) ---
%dev.quarkus.datasource.username=projedata
%dev.quarkus.datasource.password=projedata
%dev.quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/projedata
%dev.quarkus.datasource.devservices.enabled=false
%dev.quarkus.http.cors.origins=http://localhost:5173

# --- Perfil de teste (Testcontainers sobe PostgreSQL real automaticamente) ---
# Sem jdbc.url/username/password → Dev Services provisiona tudo via Testcontainers
%test.quarkus.flyway.clean-at-start=true

# --- Perfil de produção (VPS via docker-compose.prod.yml) ---
%prod.quarkus.datasource.jdbc.url=${QUARKUS_DATASOURCE_JDBC_URL:jdbc:postgresql://postgres:5432/projedata}
%prod.quarkus.datasource.username=${QUARKUS_DATASOURCE_USERNAME:projedata}
%prod.quarkus.datasource.password=${QUARKUS_DATASOURCE_PASSWORD}
%prod.quarkus.datasource.devservices.enabled=false
%prod.quarkus.http.cors.origins=${QUARKUS_HTTP_CORS_ORIGINS:*}
